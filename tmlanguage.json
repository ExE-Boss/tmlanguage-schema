{
  "$schema": "http://json-schema.org/schema#",
  "id": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "$ref": "#/definitions/grammar",
  "definitions": {
    "grammar": {
      "type": "object",
        "properties": {
          "patterns": {
            "type": "array",
            "items": { "$ref": "#/definitions/pattern" },
            "default": [ ]
          },
          "repository": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/definitions/grammar"
            }
          }
        },
        "required": [
          "patterns"
        ]
    },
    "captures": {
      "type": "object",
      "patternProperties": {
        "^[0-9]+$": {
          "type": "object",
          "properties": {
            "name": { "$ref": "#/definitions/name" },
            "patterns": {
              "type": "array",
              "items": { "$ref": "#/definitions/pattern" },
              "default": [ ]
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "pattern": {
      "type": "object",
      "properties": {
        "comment": { "type": "string" },
        "disabled": { "type": "integer", "minimum": 0, "maximum": 1 },
        "include": { "type": "string" },
        "match": { "type": "string" },
        "name": { "$ref": "#/definitions/name" },
        "contentName": { "$ref": "#/definitions/name" },
        "begin": { "type": "string" },
        "end": { "type": "string" },
        "captures": { "$ref": "#/definitions/captures" },
        "beginCaptures": { "$ref": "#/definitions/captures" },
        "endCaptures": { "$ref": "#/definitions/captures" },
        "patterns": {
          "description": "applies to the region between the begin and end matches",
          "type": "array",
          "items": { "$ref": "#/definitions/pattern" },
          "default": [ ]
        }
      },
      "dependencies": {
        "begin": ["end"],
        "end": ["begin"],
        "contentName": ["begin","end"],
        "beginCaptures": ["begin","end"],
        "endCaptures": ["begin","end"],
        "patterns": ["begin","end"]
      }
    },
    "name": {
      "anyOf": [
        {
          "type": "string",
          "pattern": "^[a-z0-9]+(\\.[a-z0-9]+)*$"
        },
        {
          "type": "string",
          "enum": [
            "comment",
            "comment.block",
            "comment.block.documentation",
            "comment.line",
            "comment.line.double-dash",
            "comment.line.double-slash",
            "comment.line.number-sign",
            "comment.line.percentage",
            "constant",
            "constant.character",
            "constant.character.escape",
            "constant.language",
            "constant.numeric",
            "constant.other",
            "constant.regexp",
            "constant.rgb-value",
            "constant.sha.git-rebase",
            "emphasis",
            "entity",
            "entity.name",
            "entity.name.class",
            "entity.name.function",
            "entity.name.method",
            "entity.name.section",
            "entity.name.selector",
            "entity.name.tag",
            "entity.name.type",
            "entity.other",
            "entity.other.attribute-name",
            "entity.other.inherited-class",
            "header",
            "invalid",
            "invalid.deprecated",
            "invalid.illegal",
            "keyword",
            "keyword.control",
            "keyword.control.less",
            "keyword.operator",
            "keyword.operator.new",
            "keyword.other",
            "keyword.other.unit",
            "markup",
            "markup.bold",
            "markup.changed",
            "markup.deleted",
            "markup.heading",
            "markup.inline.raw",
            "markup.inserted",
            "markup.italic",
            "markup.list",
            "markup.list.numbered",
            "markup.list.unnumbered",
            "markup.other",
            "markup.punctuation.list.beginning",
            "markup.punctuation.quote.beginning",
            "markup.quote",
            "markup.raw",
            "markup.underline",
            "markup.underline.link",
            "meta",
            "meta.cast",
            "meta.parameter.type.variable",
            "meta.preprocessor",
            "meta.preprocessor.numeric",
            "meta.preprocessor.string",
            "meta.return-type",
            "meta.selector",
            "meta.structure.dictionary.key.python",
            "meta.tag",
            "meta.type.annotation",
            "meta.type.name",
            "metatag.php",
            "storage",
            "storage.modifier",
            "storage.modifier.import.java",
            "storage.modifier.package.java",
            "storage.type",
            "storage.type.cs",
            "storage.type.java",
            "string",
            "string.html",
            "string.interpolated",
            "string.jade",
            "string.other",
            "string.quoted",
            "string.quoted.double",
            "string.quoted.other",
            "string.quoted.single",
            "string.quoted.triple",
            "string.regexp",
            "string.unquoted",
            "string.xml",
            "string.yaml",
            "strong",
            "support",
            "support.class",
            "support.constant",
            "support.function",
            "support.function.git-rebase",
            "support.other",
            "support.property-value",
            "support.type",
            "support.type.property-name",
            "support.type.property-name.css",
            "support.type.property-name.less",
            "support.type.property-name.scss",
            "support.variable",
            "variable",
            "variable.language",
            "variable.name",
            "variable.other",
            "variable.parameter"
          ]
        }
      ]
    }
  }
}
